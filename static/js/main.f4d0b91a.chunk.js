(this["webpackJsonpwhere-is-my-pet-frontend"]=this["webpackJsonpwhere-is-my-pet-frontend"]||[]).push([[0],{114:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(10),i=a.n(s),o=a(14),l=a(70),u=a(20),c=a.n(u),m=a(32),p=a(21),d=a(26),b=a(38),h=a(39),g=a(71),v=a.n(g),E={BASE_URL:"https://where-is-my-pet.herokuapp.com"},f=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"ResetPassword",value:function(e,t){return this.makeRequest({method:"POST",url:"/users/reset-password",params:{token:e,newPassword:t}})}},{key:"SendResetPassword",value:function(e){return this.makeRequest({method:"POST",url:"/users/reset-password-email",params:{usernameOrEmail:e}})}},{key:"SignUp",value:function(e){return this.makeRequest({method:"POST",url:"/users/sign-up",params:e})}},{key:"SignIn",value:function(e,t){return this.makeRequest({method:"POST",url:"/users/sign-in",params:{username:e,password:t}})}}]),a}(function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,[{key:"makeRequest",value:function(e){var t=e.method,a=e.params,n=void 0===a?{}:a,r=e.headers,s=void 0===r?{}:r,i=e.url;return v.a.request({method:t,url:"".concat(E.BASE_URL).concat(i),data:n,headers:s})}}]),e}()),w=new function e(){Object(p.a)(this,e),this.Users=new f},y=a(159),S=a(155),O=a(156),j=a(154),k=a(162),x=a(4),C=a(161),P=a(149),U=a(150),N=a(151),T=a(152),R=a(153),_=a(160),I=a(148),W=a(30),A=a(28);var L=function(){var e=Object(W.g)(),t=/sign-in/.test(e.pathname)?1:0;return r.a.createElement(_.a,{value:t,variant:"fullWidth",indicatorColor:"primary"},r.a.createElement(I.a,{label:"Sign Up",component:A.b,to:"/sign-up"}),r.a.createElement(I.a,{label:"Sign In",component:A.b,to:"/sign-in"}))};var q=Object(R.a)({title:{marginTop:"0",marginBottom:"2rem",fontSize:"2rem",textAlign:"center",width:"100%"},container:{paddingTop:"3rem",minHeight:"100vh",background:"linear-gradient(rgba(167, 102, 10, 1), rgba(255, 136, 0, 1))"},wrapper:{padding:"1em 1.2rem",position:"relative",marginBottom:"50px"},backdrop:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.5)",zIndex:1}}),D=function(e){var t=e.children,a=e.isLoading,n=e.showTabs,s=void 0===n||n,i=q();return r.a.createElement(P.a,{className:i.container},r.a.createElement("h1",{className:i.title},"Welcome to Where is my pet?"),r.a.createElement(U.a,{container:!0,justify:"center"},r.a.createElement(U.a,{component:N.a,xs:12,sm:10,md:6,item:!0,className:i.wrapper},s&&r.a.createElement(L,null),a&&r.a.createElement("div",{className:i.backdrop},r.a.createElement(T.a,null)),t)))},B=a(76),F=a.n(B),M=a(77),z=a.n(M),G=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={name:"",surname:"",email:"",phone:"",username:"",password:"",isSubmitting:!1,submitError:!1},e._onSubmit=function(){var t=Object(m.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState({isSubmitting:!0}),t.prev=2,t.next=5,w.Users.SignUp(e.state);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),e.setState({submitError:!0});case 10:return t.prev=10,e.setState({isSubmitting:!1}),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[2,7,10,13]])})));return function(e){return t.apply(this,arguments)}}(),e._onChange=function(t){e.setState(Object(l.a)({},t.currentTarget.name,t.currentTarget.value))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(D,{isLoading:this.state.isSubmitting},this.state.submitError&&r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{severity:"error"},"Ups - Cannot create account!"),r.a.createElement("br",null)),r.a.createElement("p",null,"Sign up to upload an animal!"),r.a.createElement("form",{onSubmit:this._onSubmit},r.a.createElement(y.a,{margin:"normal",type:"text",name:"name",onChange:this._onChange,label:"Name",variant:"outlined",className:e.input}),r.a.createElement(y.a,{margin:"normal",type:"text",name:"surname",onChange:this._onChange,label:"Surname",variant:"outlined",className:e.input}),r.a.createElement(y.a,{margin:"normal",type:"email",name:"email",onChange:this._onChange,label:"Email",variant:"outlined",className:e.input}),r.a.createElement(y.a,{margin:"normal",type:"tel",name:"phone",onChange:this._onChange,label:"Mobile phone",variant:"outlined",className:e.input}),r.a.createElement(y.a,{margin:"normal",type:"text",name:"username",onChange:this._onChange,label:"Username",variant:"outlined",className:e.input}),r.a.createElement(H,{margin:"normal",name:"password",onChange:this._onChange,label:"Password",variant:"outlined",className:e.input}),r.a.createElement(S.a,{type:"submit",variant:"contained",color:"primary",disabled:this.state.isSubmitting,fullWidth:!0},"SIGN UP")))}}]),a}(n.Component);function H(e){var t=r.a.useState(!1),a=Object(o.a)(t,2),n=a[0],s=a[1],i=r.a.createElement(O.a,{position:"end"},r.a.createElement(j.a,{"aria-label":"toggle password visibility",onClick:function(){return s(!n)},onMouseDown:function(e){e.preventDefault()}},n?r.a.createElement(F.a,null):r.a.createElement(z.a,null)));return r.a.createElement(y.a,Object.assign({type:n?"text":"password",InputProps:{endAdornment:i}},e))}var J=Object(k.a)({container:{minHeight:"100vh",background:"linear-gradient(rgba(167, 102, 10, 1), rgba(255, 136, 0, 1))"},wrapper:{padding:"1em 1.2rem"},input:{width:"100%"}}),Y=Object(x.a)(J)(G),K=a(158),Q=a(157),V=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",isSubmitting:!1,submitError:!1},e._onSubmit=function(){var t=Object(m.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState({isSubmitting:!0}),t.prev=2,t.next=5,w.Users.SignIn(e.state.username,e.state.password);case 5:t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),e.setState({submitError:!0});case 11:return t.prev=11,e.setState({isSubmitting:!1}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[2,8,11,14]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(D,{isLoading:this.state.isSubmitting},this.state.submitError&&r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{severity:"error"},"Ups - Cannot create account!"),r.a.createElement("br",null)),r.a.createElement("p",null,"Enter your username and password to sign in:"),r.a.createElement("form",{onSubmit:this._onSubmit},r.a.createElement(y.a,{margin:"normal",type:"text",name:"username",label:"Username",variant:"outlined",className:t.input,onChange:function(t){return e.setState({username:t.currentTarget.value})}}),r.a.createElement(y.a,{margin:"normal",type:"password",name:"password",label:"Password",variant:"outlined",className:t.input,onChange:function(t){return e.setState({password:t.currentTarget.value})}}),r.a.createElement(S.a,{type:"submit",variant:"contained",color:"primary",disabled:this.state.isSubmitting,fullWidth:!0},"SIGN IN"),r.a.createElement("div",{className:t.forgotPassword},r.a.createElement(Q.a,{component:A.b,to:"/recover-password"},"Forgot your password? Click here."))))}}]),a}(n.Component),X=Object(k.a)({input:{width:"100%"},forgotPassword:{marginTop:"10px",textAlign:"center"}}),Z=Object(x.a)(X)(V);function $(){var e=r.a.useState(!1),t=Object(o.a)(e,2),a=t[0],n=t[1],s=r.a.useState(!1),i=Object(o.a)(s,2),l=i[0],u=i[1],p=r.a.useState(!1),d=Object(o.a)(p,2),b=d[0],h=d[1],g=r.a.useState(!1),v=Object(o.a)(g,2),E=v[0],f=v[1],O=r.a.useState(!1),j=Object(o.a)(O,2),k=j[0],x=j[1],P=r.a.useState(""),U=Object(o.a)(P,2),N=U[0],T=U[1],R=function(){var e=Object(m.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),h(!1),u(!1),f(!1),x(!1),N){e.next=8;break}return f(!0),e.abrupt("return");case 8:return e.prev=8,n(!0),e.next=12,w.Users.SendResetPassword(N);case 12:u(!0),e.next=21;break;case 15:if(e.prev=15,e.t0=e.catch(8),!/Invalid Username or Email/.test(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.data)){e.next=20;break}return x(!0),e.abrupt("return");case 20:h(!0);case 21:return e.prev=21,n(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[8,15,21,24]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(D,{isLoading:a,showTabs:!1},r.a.createElement("h2",null,"Reset your password"),r.a.createElement("p",null,"Enter your username or email to recover your account:"),l&&r.a.createElement(C.a,{severity:"success"},"An email has been sent to your address. Please check your inbox."),b&&r.a.createElement(C.a,{severity:"error"},"Ups - Something has gone wrong."),E&&r.a.createElement(C.a,{severity:"warning"},"Please, enter your username or email."),k&&r.a.createElement(C.a,{severity:"warning"},"Invalid username or password."),r.a.createElement("form",{onSubmit:R},r.a.createElement(y.a,{type:"text",label:"Username or Email",onChange:function(e){return T(e.currentTarget.value)},variant:"outlined",margin:"normal",fullWidth:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(S.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0},"Send recover email")))}function ee(e){var t=e.token,a=r.a.useState(""),n=Object(o.a)(a,2),s=n[0],i=n[1],l=r.a.useState(""),u=Object(o.a)(l,2),p=u[0],d=u[1],b=r.a.useState(!1),h=Object(o.a)(b,2),g=h[0],v=h[1],E=r.a.useState(!1),f=Object(o.a)(E,2),O=f[0],j=f[1],k=r.a.useState(!1),x=Object(o.a)(k,2),P=x[0],U=x[1],N=r.a.useState(!1),T=Object(o.a)(N,2),R=T[0],_=T[1],I=function(){var e=Object(m.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),_(!1),U(!1),v(!1),s&&s===p){e.next=9;break}return v(!0),e.abrupt("return");case 9:v(!1);case 10:return e.prev=10,j(!0),e.next=14,w.Users.ResetPassword(t,s);case 14:U(!0),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),_(!0);case 20:return e.prev=20,j(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[10,17,20,23]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(D,{isLoading:O,showTabs:!1},r.a.createElement("h2",null,"Reset your password"),r.a.createElement("p",null,"Enter a new password for your account:"),P&&r.a.createElement(C.a,{severity:"success"},"Your password has been updated"),R&&r.a.createElement(C.a,{severity:"error"},"Ups - Something has gone wrong."),g&&r.a.createElement(C.a,{severity:"warning"},"Passwords do not match"),r.a.createElement("form",{onSubmit:I},r.a.createElement(y.a,{type:"password",label:"Password",onChange:function(e){return i(e.currentTarget.value)},variant:"outlined",margin:"normal",fullWidth:!0}),r.a.createElement(y.a,{type:"password",label:"Repeat your password",onChange:function(e){return d(e.currentTarget.value)},variant:"outlined",margin:"normal",fullWidth:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(S.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0},"Reset Password")))}var te=function(){var e=new URLSearchParams(Object(W.g)().search).get("h");return r.a.createElement(r.a.Fragment,null,!e&&r.a.createElement($,null),e&&r.a.createElement(ee,{token:e}))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K.a,null),r.a.createElement(A.a,null,r.a.createElement(W.d,null,r.a.createElement(W.b,{path:"/sign-in"},r.a.createElement(Z,null)),r.a.createElement(W.b,{path:"/sign-up"},r.a.createElement(Y,null)),r.a.createElement(W.b,{path:"/recover-password"},r.a.createElement(te,null)),r.a.createElement(W.a,{to:"/sign-in"})))),document.getElementById("root"))},85:function(e,t,a){e.exports=a(114)}},[[85,1,2]]]);
//# sourceMappingURL=main.f4d0b91a.chunk.js.map